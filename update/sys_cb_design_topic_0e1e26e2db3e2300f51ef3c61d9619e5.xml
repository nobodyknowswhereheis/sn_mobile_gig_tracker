<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic display_value="_PRVW__4a1e26e2493e23001a59bc4c8581f5e2">c61e26e2db3e2300f51ef3c61d9619e3</compiled_topic>
        <design_definition>{"type":"FlowTopic","triggers":[{"type":"Trigger","name":"ee6ec450f9d644e79e27141fdcddfd22","triggerType":"request","id":"ee6ec450f9d644e79e27141fdcddfd22"}],"goals":[{"name":"primary","trigger_id":"ee6ec450f9d644e79e27141fdcddfd22","nodes":[{"type":"StartGoal","goal_id":"395d0e8aa144436fae5415b45966ecf5","greeting_msg":{"type":"String","mode":"string","value":""},"id":"0af52ead8e224343a1606d95078bcd57","name":"Start"},{"type":"TerminateGoal","goal_id":"395d0e8aa144436fae5415b45966ecf5","confirmation_msg":{"type":"String","mode":"string","value":""},"id":"402c3ab99b7d4aee9e077702d5e3ee40","name":"End"},{"type":"CRUDAction","mode":"read","read_mode":"variable","variable_id":"ae4d315d70f541fc9775bbee2edbb5fc","script":"(function execute() {\n    var options = \"123456\";\n\n    // get variables\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var count = 0;\n    \n    var now = new GlideDateTime();\n    \n    var gr = new GlideRecordSecure('x_snc_gig_tracker_gig');\n    gr.addQuery(\"call_time\",\"&gt;=\",now);\n    gr.orderBy(\"call_time\"); \n    gr.chooseWindow(index, index + limit, true);\n\n    gr.query();  \n\n\n    if ( vaVars.count &gt; index + limit) {\n        vaVars.more = true;\n    }\n    else\n        vaVars.more = false;\n        \n    while(gr.next()) {\n        return gr;\n    }\n\n    return options;\n})();\n\n","id":"d66c0dac3421411ab67459aca36f8f22","name":"Lookup Gigs","goal_id":"395d0e8aa144436fae5415b45966ecf5","condition":{"type":"Condition","mode":"glide_scripted_query","value":"(function execute() {\n    var options = \"123456\";\n\n    // get variables\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var count = 0;\n    \n    var now = new GlideDateTime();\n    \n    var gr = new GlideRecordSecure('x_snc_gig_tracker_gig');\n    gr.addQuery(\"call_time\",\"&gt;=\",now);\n    gr.orderBy(\"call_time\"); \n    gr.chooseWindow(index, index + limit, true);\n\n    gr.query();  \n\n\n    if ( vaVars.count &gt; index + limit) {\n        vaVars.more = true;\n    }\n    else\n        vaVars.more = false;\n        \n    while(gr.next()) {\n        return gr;\n    }\n\n    return options;\n})();\n\n"}},{"type":"Decision","name":"Show next?","branches":[{"type":"Branch","label":"has next?","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    return vaVars.more == true;\n})()\n"},"id":"0c8ad82aba3c4bce877398402a127684","name":"has next?"},{"type":"Branch","label":"Done","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    return vaInputs.more == false;\n})()\n"},"id":"0b88eb0f07f44e8db0a6f302faefcf60","name":"Done"}],"id":"733fe469878040b7aab14c001a897be5","goal_id":"395d0e8aa144436fae5415b45966ecf5"},{"type":"ScriptedAction","script":"(function execute() {\n    vaVars.index ++;\n        return '';\n    })();\n","id":"b0f41050b5674185a92ce2df2c08be06","name":"Go to Next Page","goal_id":"395d0e8aa144436fae5415b45966ecf5"},{"type":"RecordOutputPrompt","mode":"script","table":"x_snc_gig_tracker_gig","script":"(function execute(table) {\n        var gr = new GlideRecord(table);\n        gr.get(vaInputs.lookup_gigs);\n        if(gr) {\n            return gr;\n        }\n    })(table);\n","fields":["short_description","location","call_time"],"id":"7b893336f6744e0e9af17525ed7a7b1f","name":"Show Gig Info","goal_id":"395d0e8aa144436fae5415b45966ecf5","applicability":{"type":"Applicability","mode":"query","value":"lookup_gigsISNOTEMPTY"},"condition":{"type":"Condition","mode":"glide_scripted_query","value":"(function execute(table) {\n        var gr = new GlideRecord(table);\n        gr.get(vaInputs.lookup_gigs);\n        if(gr) {\n            return gr;\n        }\n    })(table);\n"}},{"type":"OutputPrompt","value":{"type":"String","mode":"script","value":"(function execute() {\n    /* Return a quoted string.  For example:\n\n       var result;\n       if (vaInputs.first_name == 'Bill') {\n           return gs.getMessage('hi there {0}', [vaInputs.first_name]);\n       } else {\n           return gs.getMessage('how are you {0}', [vaInputs.last_name]);\n       }\n    */\n    return 'I found '+vaVars.count + \" gigs coming up\";\n})()\n"},"id":"a03c471a0249485fbeb6b15270e940de","name":"give count feedback","goal_id":"395d0e8aa144436fae5415b45966ecf5"},{"type":"ScriptedAction","script":"(function execute() {\n    var now = new GlideDateTime();\n    var gr = new GlideRecordSecure('x_snc_gig_tracker_gig');\n    gr.addQuery(\"call_time\",\"&gt;=\",now);\n    gr.orderBy(\"call_time\"); \n    gr.query();  \n\n    // get total count, used for pagination\n    count = gr.getRowCount();\n    vaVars.count = count;\n})()\n","id":"3f581952a01d49d9b053ce720853923e","name":"get count","goal_id":"395d0e8aa144436fae5415b45966ecf5"},{"type":"OutputPrompt","value":{"type":"String","mode":"string","value":"end"},"id":"0a501147b9cc48b6891a4f2bf4bdc9be","name":"end","goal_id":"395d0e8aa144436fae5415b45966ecf5"}],"edges":[{"type":"Edge","source_node_id":"7b893336f6744e0e9af17525ed7a7b1f","target_node_id":"733fe469878040b7aab14c001a897be5","id":"d65ea04cbbad4fcb83c422bc1a6e834d"},{"type":"Edge","source_node_id":"d66c0dac3421411ab67459aca36f8f22","target_node_id":"7b893336f6744e0e9af17525ed7a7b1f","id":"cc90f4f3f5ac4715a2faa0c8fbe5450a"},{"type":"Edge","source_node_id":"733fe469878040b7aab14c001a897be5","target_node_id":"b0f41050b5674185a92ce2df2c08be06","branch_id":"0c8ad82aba3c4bce877398402a127684","id":"100367f17bef48babc21a892b570e557","name":"0c8ad82aba3c4bce877398402a127684"},{"type":"Edge","source_node_id":"b0f41050b5674185a92ce2df2c08be06","target_node_id":"d66c0dac3421411ab67459aca36f8f22","id":"6e74a375a95c452d9f4132ae960bcd3b"},{"type":"Edge","source_node_id":"a03c471a0249485fbeb6b15270e940de","target_node_id":"d66c0dac3421411ab67459aca36f8f22","id":"97db5a96e824442d967e5d70be60a9f1"},{"type":"Edge","source_node_id":"0af52ead8e224343a1606d95078bcd57","target_node_id":"3f581952a01d49d9b053ce720853923e","id":"306c1ae6bbcb4f89a30977b9c6190636"},{"type":"Edge","source_node_id":"3f581952a01d49d9b053ce720853923e","target_node_id":"a03c471a0249485fbeb6b15270e940de","id":"61a146b4f96a4b7688bd7ed15c7bb972"},{"type":"Edge","source_node_id":"733fe469878040b7aab14c001a897be5","target_node_id":"0a501147b9cc48b6891a4f2bf4bdc9be","branch_id":"0b88eb0f07f44e8db0a6f302faefcf60","id":"24556edb54254e0ea57ffa798d66dda0","name":"0b88eb0f07f44e8db0a6f302faefcf60"},{"type":"Edge","source_node_id":"0a501147b9cc48b6891a4f2bf4bdc9be","target_node_id":"402c3ab99b7d4aee9e077702d5e3ee40","id":"4c45d756c007477bb75685952039eb15"}],"id":"395d0e8aa144436fae5415b45966ecf5"}],"script_variables":[{"type":"String","name":"more","value":{"type":"String","mode":"string","value":"false"},"id":"ccf2886d97994ea6876535011573f9d1"},{"type":"String","name":"limit","value":{"type":"String","mode":"string","value":"1"},"id":"bb79127516d94f008bae4b3f3413c307"},{"type":"String","name":"index","value":{"type":"String","mode":"string","value":"0"},"id":"097714f409064741ab0e62341639b9c0"},{"type":"String","name":"count","value":{"type":"String","mode":"string","value":"0"},"id":"c2b37c0356b94917abf7c703c64e6093"}],"glide_variables":[{"type":"Reference","table":"x_snc_gig_tracker_gig","id":"ae4d315d70f541fc9775bbee2edbb5fc","name":"lookup_gigs"},{"type":"Reference","table":"sys_user","id":"current-user","name":"user"}],"roles":[],"scope":"c55fd1504f12a300137c4b8d0210c7d0","id":"a0053d26db7a2300f51ef3c61d9619f5","name":"_PRVW__4a1e26e2493e23001a59bc4c8581f5e2","key_phrases":["Upcoming Gigs","this week"]}</design_definition>
        <design_topic_id>a0053d26db7a2300f51ef3c61d9619f5</design_topic_id>
        <name>_PRVW__4a1e26e2493e23001a59bc4c8581f5e2</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>jesse.adams</sys_created_by>
        <sys_created_on>2019-01-07 18:34:15</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>0e1e26e2db3e2300f51ef3c61d9619e5</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="Gig Tracker" source="x_snc_gig_tracker">c55fd1504f12a300137c4b8d0210c7d0</sys_package>
        <sys_policy/>
        <sys_scope display_value="Gig Tracker">c55fd1504f12a300137c4b8d0210c7d0</sys_scope>
        <sys_update_name>sys_cb_design_topic_0e1e26e2db3e2300f51ef3c61d9619e5</sys_update_name>
        <sys_updated_by>jesse.adams</sys_updated_by>
        <sys_updated_on>2019-01-07 18:34:15</sys_updated_on>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
