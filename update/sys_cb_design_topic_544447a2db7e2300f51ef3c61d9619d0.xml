<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic display_value="Manage my outstanding requests">944447a2db7e2300f51ef3c61d9619c0</compiled_topic>
        <design_definition>{"type":"FlowTopic","triggers":[{"type":"Trigger","name":"538a905a5f00461fbedb2f492934141f","triggerType":"request","id":"538a905a5f00461fbedb2f492934141f"}],"goals":[{"name":"primary","trigger_id":"538a905a5f00461fbedb2f492934141f","nodes":[{"type":"StartGoal","goal_id":"fd6a7c2ce4914ba6b989b9e1822450aa","greeting_msg":{"type":"String","mode":"string","value":""},"id":"0deac543677f462a88b188eed0cda201","name":"Start"},{"type":"TerminateGoal","goal_id":"fd6a7c2ce4914ba6b989b9e1822450aa","confirmation_msg":{"type":"String","mode":"string","value":""},"id":"96a670c8228a453ba7a84436e66f8d2a","name":"End"},{"type":"CRUDAction","mode":"read","read_mode":"variable","variable_id":"6f181564f381466382430517f3d8cb50","script":"(function execute(table) {\n    var gr = new GlideRecordSecure('x_snc_gig_tracker_gig_request');\n    gr.addQuery('member', vaInputs.user);\n    gr.addQuery('status','1');\n    gr.orderByDesc('sys_created_on'); \n\n    gr.query();  \n\n    // get total count, used for pagination\n    vaVars.count = gr.getRowCount();\n})(table)\n","id":"f42cf28d32cb45e19671394f837abb05","name":"outstanding requests","goal_id":"fd6a7c2ce4914ba6b989b9e1822450aa","condition":{"type":"Condition","mode":"glide_scripted_query","value":"(function execute(table) {\n    var gr = new GlideRecordSecure('x_snc_gig_tracker_gig_request');\n    gr.addQuery('member', vaInputs.user);\n    gr.addQuery('status','1');\n    gr.orderByDesc('sys_created_on'); \n\n    gr.query();  \n\n    // get total count, used for pagination\n    vaVars.count = gr.getRowCount();\n})(table)\n"}},{"type":"Decision","name":"Decision","branches":[{"type":"Branch","label":"hasNext","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    var res = vaVars.count &gt; 0 == true ? true : false;\n    return res;\n})()\n"},"id":"02a88dc069bd4c289d74bba90bb7334c","name":"hasNext"},{"type":"Branch","label":"!hasNext","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    var go = vaVars.count &gt; 0 ? false : true;\n    return go;\n})()\n"},"id":"753783a01693419ebb1c5be2412067f8","name":"!hasNext"}],"id":"4caa81931d5a4da9a5c3577fdc403b1e","goal_id":"fd6a7c2ce4914ba6b989b9e1822450aa"},{"type":"OutputPrompt","value":{"type":"String","mode":"string","value":"gs.getMessage(\"It looks like you have no outstanding requests at this time!\")"},"id":"eb9935f1c3214204ab12d5f999212cf4","name":"All done!","goal_id":"fd6a7c2ce4914ba6b989b9e1822450aa"},{"type":"Decision","name":"Decision","branches":[{"type":"Branch","label":"Should I go?","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    var shouldIgo = vaVars.count &gt; vaVars.index + vaVars.limit ? false : true;\n    return shouldIgo;\n})()\n"},"id":"e94a67fd1c684985bc4f353f7a8d6bc1","name":"Should I go?"},{"type":"Branch","label":"Should I stay?","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    var shouldIStay = vaVars.count &gt; vaVars.index + vaVars.limit ? true : false;\n    return shouldIStay;\n})()\n"},"id":"89ee8afc2c7e4d758bbae01e8baf666b","name":"Should I stay?"}],"id":"7d9949052cd246ddb5036d2091953d7f","goal_id":"fd6a7c2ce4914ba6b989b9e1822450aa"},{"type":"ScriptedAction","script":"(function execute() {\n    /* Code your scripted action here. For example, you might update a \n       record based on conditional logic:\n    \n        if (vaVars.my_flag == 'say hello') {\n            gs.info('hi there');\n        } else {\n            gs.info('bye now');\n        }\n    */\n    vaVars.index ++;\n})()\n","id":"6b27cd9e10f24af1ac47a5cf1d5b48b5","name":"incrementNext","goal_id":"fd6a7c2ce4914ba6b989b9e1822450aa"},{"type":"RecordOutputPrompt","mode":"variable","table":"x_snc_gig_tracker_gig_request","variable_id":"f5e549a28927486fbe5527e9361532d3","fields":["gig","instrument"],"id":"197a3437d9bc46ff8c98a2d2fe9ed0d3","name":"ShowNextRecord","goal_id":"fd6a7c2ce4914ba6b989b9e1822450aa","condition":{"type":"Condition","mode":"variable","value":""}},{"type":"CRUDAction","mode":"read","read_mode":"variable","variable_id":"f5e549a28927486fbe5527e9361532d3","script":"(function execute(table) {\n    var gr = new GlideRecordSecure('x_snc_gig_tracker_gig_request');\n    gr.addQuery('member', vaInputs.user);\n    gr.addQuery('status','1');\n    gr.orderByDesc('sys_created_on'); \n    gr.chooseWindow(vaVars.index, vaVars.index + vaVars.limit, true);\n    gr.query();  \n\n    // get total count, used for pagination\n    while(gr.next()){\n        return gr;\n    }\n})(table)\n","id":"12e560da909c4f599df63bffb22d3ba5","name":"nextRecord","goal_id":"fd6a7c2ce4914ba6b989b9e1822450aa","condition":{"type":"Condition","mode":"glide_scripted_query","value":"(function execute(table) {\n    var gr = new GlideRecordSecure('x_snc_gig_tracker_gig_request');\n    gr.addQuery('member', vaInputs.user);\n    gr.addQuery('status','1');\n    gr.orderByDesc('sys_created_on'); \n    gr.chooseWindow(vaVars.index, vaVars.index + vaVars.limit, true);\n    gr.query();  \n\n    // get total count, used for pagination\n    while(gr.next()){\n        return gr;\n    }\n})(table)\n"}},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"44525f61362d4f429b13ebc6908ab1ed","name":"selected_action","goal_id":"fd6a7c2ce4914ba6b989b9e1822450aa","variable_id":"34d317b9d536467aabbfe3838c29f57c","message":{"type":"String","mode":"string","value":"gs.getMessage(\"How should I repsond?\")"},"acknowledgement":{"type":"String","mode":"string","value":"gs.getMessage(\"Okay\")"},"confirmation":{"type":"String","mode":"string","value":"gs.getMessage(\"Great! I'll take care of that for you.\")"},"optional":false},{"type":"CRUDAction","mode":"update","query":"status={{vaInputs.selected_action}}","variable_id":"f5e549a28927486fbe5527e9361532d3","id":"8a8b3b64b95940f491fa04bfa69fea69","name":"Update Request","goal_id":"fd6a7c2ce4914ba6b989b9e1822450aa","applicability":{"type":"Applicability","mode":"query","value":"selected_action=2^ORselected_action=3"}},{"type":"ScriptedAction","script":"(function execute() {\n    if(vaInputs.selected_action &gt; 1){\n        var gr = new GlideRecord('x_snc_gig_tracker_gig_request');\n        gr.get(vaInputs.nextrecord);\n\n        gr.status = vaInputs.selected_action;\n        gr.update();\n\n        vaVars.count --; // we removed one record from our filter. Need up update the count.\n        vaVars.index --; // don't want to miss any rows due to the update.\n    }\n\n})()\n","id":"e69079d369a04e40a53ad3c39cfd8d81","name":"UpdateRequest","goal_id":"fd6a7c2ce4914ba6b989b9e1822450aa"}],"edges":[{"type":"Edge","source_node_id":"f42cf28d32cb45e19671394f837abb05","target_node_id":"4caa81931d5a4da9a5c3577fdc403b1e","id":"8168dc989955479bb6c87ab881a947d2"},{"type":"Edge","source_node_id":"0deac543677f462a88b188eed0cda201","target_node_id":"f42cf28d32cb45e19671394f837abb05","id":"c3a9c569f7a349ca915ae6a9dedf5751"},{"type":"Edge","source_node_id":"4caa81931d5a4da9a5c3577fdc403b1e","target_node_id":"12e560da909c4f599df63bffb22d3ba5","branch_id":"02a88dc069bd4c289d74bba90bb7334c","id":"0d4c4b09c66c4ae89ea9eb6197da9445","name":"02a88dc069bd4c289d74bba90bb7334c"},{"type":"Edge","source_node_id":"4caa81931d5a4da9a5c3577fdc403b1e","target_node_id":"eb9935f1c3214204ab12d5f999212cf4","branch_id":"753783a01693419ebb1c5be2412067f8","id":"432719a8226340c5a614ce5a886b21da","name":"753783a01693419ebb1c5be2412067f8"},{"type":"Edge","source_node_id":"eb9935f1c3214204ab12d5f999212cf4","target_node_id":"96a670c8228a453ba7a84436e66f8d2a","id":"a7d14e9711fb409cab66ac762bf56605"},{"type":"Edge","source_node_id":"7d9949052cd246ddb5036d2091953d7f","target_node_id":"96a670c8228a453ba7a84436e66f8d2a","branch_id":"e94a67fd1c684985bc4f353f7a8d6bc1","id":"e3b00c5208ed447a97112f4354f06e24","name":"e94a67fd1c684985bc4f353f7a8d6bc1"},{"type":"Edge","source_node_id":"7d9949052cd246ddb5036d2091953d7f","target_node_id":"6b27cd9e10f24af1ac47a5cf1d5b48b5","branch_id":"89ee8afc2c7e4d758bbae01e8baf666b","id":"c500b8e786164795b02409a0e7b28913","name":"89ee8afc2c7e4d758bbae01e8baf666b"},{"type":"Edge","source_node_id":"6b27cd9e10f24af1ac47a5cf1d5b48b5","target_node_id":"12e560da909c4f599df63bffb22d3ba5","id":"4b4c14fe2c6942eca15bff76ef19058b"},{"type":"Edge","source_node_id":"12e560da909c4f599df63bffb22d3ba5","target_node_id":"197a3437d9bc46ff8c98a2d2fe9ed0d3","id":"6eb4c92453d14053ba9ca2c1c112e7f5"},{"type":"Edge","source_node_id":"197a3437d9bc46ff8c98a2d2fe9ed0d3","target_node_id":"44525f61362d4f429b13ebc6908ab1ed","id":"d6cfd301a4924420896453c7013dc7b1"},{"type":"Edge","source_node_id":"44525f61362d4f429b13ebc6908ab1ed","target_node_id":"8a8b3b64b95940f491fa04bfa69fea69","id":"eff0a10b83e0432785545cc6a04234d3"},{"type":"Edge","source_node_id":"8a8b3b64b95940f491fa04bfa69fea69","target_node_id":"e69079d369a04e40a53ad3c39cfd8d81","id":"52a4426ae0b7443a803451f5b811bed1"},{"type":"Edge","source_node_id":"e69079d369a04e40a53ad3c39cfd8d81","target_node_id":"7d9949052cd246ddb5036d2091953d7f","id":"d15845f2e5314475bee450428c316546"}],"id":"fd6a7c2ce4914ba6b989b9e1822450aa"}],"script_variables":[{"type":"String","name":"count","value":{"type":"String","mode":"string","value":"0"},"id":"7668df36fb7b47bc925fae1c42500f1d"},{"type":"String","name":"index","value":{"type":"String","mode":"string","value":"0"},"id":"58ecf2a9bb4341218993bd36e6d125d7"},{"type":"String","name":"limit","value":{"type":"String","mode":"string","value":"1"},"id":"17aa4bc9879046eaae2771a6fd922d10"}],"glide_variables":[{"type":"Reference","table":"x_snc_gig_tracker_gig_request","id":"6f181564f381466382430517f3d8cb50","name":"outstanding_requests"},{"type":"Reference","table":"sys_user","id":"current-user","name":"user"},{"type":"Reference","table":"x_snc_gig_tracker_gig_request","id":"f5e549a28927486fbe5527e9361532d3","name":"nextrecord"},{"type":"Choice","choices":[{"name":"Confirm","element":"2"},{"name":"Decline","element":"3"},{"name":"Nothing for now","element":"1"}],"id":"34d317b9d536467aabbfe3838c29f57c","name":"selected_action"},{"type":"Reference","table":"","id":"91581403b07b47a58c28ad7653c81c82","name":"update_request"}],"roles":[],"scope":"c55fd1504f12a300137c4b8d0210c7d0","id":"9008fa6adb3e2300f51ef3c61d9619ae","name":"Manage my outstanding requests","key_phrases":["Manage my outstanding requests"]}</design_definition>
        <design_topic_id>9008fa6adb3e2300f51ef3c61d9619ae</design_topic_id>
        <name>Manage my outstanding requests</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>jesse.adams</sys_created_by>
        <sys_created_on>2019-01-07 20:11:05</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>544447a2db7e2300f51ef3c61d9619d0</sys_id>
        <sys_mod_count>1</sys_mod_count>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="Gig Tracker" source="x_snc_gig_tracker">c55fd1504f12a300137c4b8d0210c7d0</sys_package>
        <sys_policy/>
        <sys_scope display_value="Gig Tracker">c55fd1504f12a300137c4b8d0210c7d0</sys_scope>
        <sys_update_name>sys_cb_design_topic_544447a2db7e2300f51ef3c61d9619d0</sys_update_name>
        <sys_updated_by>jesse.adams</sys_updated_by>
        <sys_updated_on>2019-01-07 20:39:51</sys_updated_on>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
