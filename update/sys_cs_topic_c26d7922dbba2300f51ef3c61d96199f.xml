<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cs_topic">
    <sys_cs_topic action="INSERT_OR_UPDATE">
        <active>true</active>
        <applicability/>
        <cb_topic_id display_value="Upcoming Gigs">a0053d26db7a2300f51ef3c61d9619f5</cb_topic_id>
        <definition>{"id":"a0053d26db7a2300f51ef3c61d9619f5","name":"_PRVW__466d7922c1ba2300ff6879f20360d29e","vendor_id":"c2f0b8f187033200246ddd4c97cb0bb9","description":"_PRVW__466d7922c1ba2300ff6879f20360d29e","category":"","key_phrases":["Upcoming Gigs"],"variables":[{"name":"__segment_trigger_b6393fa81c2d4642a68da420fd8a6c84_done","type":"java.lang.Object","init_value":"false"},{"name":"previous_graph_node","type":"java.lang.Object"}],"fields":[{"type":"Reference","table_name":"x_snc_gig_tracker_gig","name":"lookup_gigs","unique":false,"key_phrases":[],"static_enum_list":[]},{"type":"Reference","table_name":"sys_user","name":"user","unique":false,"key_phrases":[],"static_enum_list":[]},{"type":"Boolean","name":"RootDecisionBranch_ce6d792299ba23009b644d897df3399e","unique":false,"default_value":"true","key_phrases":[],"static_enum_list":[]},{"type":"String","name":"__silent_Branch_c050b4ae4254492bb491ddd78f2642be","unique":false,"key_phrases":[],"static_enum_list":[]},{"type":"String","name":"__silent_TerminateGoal_402c3ab99b7d4aee9e077702d5e3ee40","unique":false,"key_phrases":[],"static_enum_list":[]},{"type":"String","name":"__silent_ScriptedAction_b0f41050b5674185a92ce2df2c08be06","unique":false,"key_phrases":[],"static_enum_list":[]},{"type":"String","name":"__silent_Decision_RootDecision_4e6d792274ba23004f2b33c347b0779e","unique":false,"key_phrases":[],"static_enum_list":[]},{"type":"String","name":"__silent_StartGoal_0af52ead8e224343a1606d95078bcd57","unique":false,"key_phrases":[],"static_enum_list":[]},{"type":"String","name":"__silent_CRUDAction_d66c0dac3421411ab67459aca36f8f22","unique":false,"key_phrases":[],"static_enum_list":[]},{"type":"String","name":"__silent_Branch_65f83fe2128f44848ab6d471e23e52f5","unique":false,"key_phrases":[],"static_enum_list":[]},{"type":"String","name":"__silent_Decision_733fe469878040b7aab14c001a897be5","unique":false,"key_phrases":[],"static_enum_list":[]},{"type":"String","name":"__silent_Branch_RootDecisionBranch_8e6d7922ecba2300fe9f8aea4c59229e","unique":false,"key_phrases":[],"static_enum_list":[]},{"type":"String","name":"__silent_RecordOutputPrompt_9214db00a95e40ddbf6b859e0d977b63","unique":false,"key_phrases":[],"static_enum_list":[]}],"actions":[],"tasks":[{"type":"Consumer to system","show_as_button":true,"name":"primary","description":"primary","applicability":"vaVars.__segment_trigger_b6393fa81c2d4642a68da420fd8a6c84_done==false","mode":"Qmode","key_phrases":[],"greeting_msg":"vaInputs.initialize(\"user\");vaInputs.initialize(\"RootDecisionBranch_ce6d792299ba23009b644d897df3399e\");vaInputs.initialize(\"__silent_StartGoal_0af52ead8e224343a1606d95078bcd57\");vaInputs.initialize(\"__silent_TerminateGoal_402c3ab99b7d4aee9e077702d5e3ee40\");vaInputs.initialize(\"__silent_CRUDAction_d66c0dac3421411ab67459aca36f8f22\");vaInputs.initialize(\"__silent_Decision_733fe469878040b7aab14c001a897be5\");vaInputs.initialize(\"__silent_ScriptedAction_b0f41050b5674185a92ce2df2c08be06\");vaInputs.initialize(\"__silent_Branch_RootDecisionBranch_8e6d7922ecba2300fe9f8aea4c59229e\");vaInputs.initialize(\"__silent_RecordOutputPrompt_9214db00a95e40ddbf6b859e0d977b63\");vaInputs.initialize(\"__silent_Branch_c050b4ae4254492bb491ddd78f2642be\");vaInputs.initialize(\"__silent_Decision_RootDecision_4e6d792274ba23004f2b33c347b0779e\");vaInputs.initialize(\"__silent_Branch_65f83fe2128f44848ab6d471e23e52f5\");null;","fields":[{"name":"__silent_Decision_RootDecision_4e6d792274ba23004f2b33c347b0779e","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"RootDecision_for_goal_primary___RootDecision_4e6d792274ba23004f2b33c347b0779e\";vaInputs.__silent_Decision_RootDecision_4e6d792274ba23004f2b33c347b0779e=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"acknowledge_msg":"vaVars.previous_graph_node=\"RootDecision_for_goal_primary___RootDecision_4e6d792274ba23004f2b33c347b0779e\";vaInputs.RootDecisionBranch_ce6d792299ba23009b644d897df3399e=true;null;"},{"name":"__silent_Branch_RootDecisionBranch_8e6d7922ecba2300fe9f8aea4c59229e","applicable":"vaVars.previous_graph_node==\"RootDecision_for_goal_primary___RootDecision_4e6d792274ba23004f2b33c347b0779e\" &amp;&amp; ((vaInputs.RootDecisionBranch_ce6d792299ba23009b644d897df3399e.getValue() == true))","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"RootDecisionBranch_8e6d7922ecba2300fe9f8aea4c59229e___RootDecisionBranch_8e6d7922ecba2300fe9f8aea4c59229e\";vaInputs.__silent_Branch_RootDecisionBranch_8e6d7922ecba2300fe9f8aea4c59229e=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"acknowledge_msg":"vaVars.previous_graph_node=\"RootDecisionBranch_8e6d7922ecba2300fe9f8aea4c59229e___RootDecisionBranch_8e6d7922ecba2300fe9f8aea4c59229e\";null;"},{"name":"__silent_StartGoal_0af52ead8e224343a1606d95078bcd57","applicable":"vaVars.previous_graph_node==\"RootDecisionBranch_8e6d7922ecba2300fe9f8aea4c59229e___RootDecisionBranch_8e6d7922ecba2300fe9f8aea4c59229e\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Start___0af52ead8e224343a1606d95078bcd57\";vaInputs.__silent_StartGoal_0af52ead8e224343a1606d95078bcd57=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"acknowledge_msg":"vaVars.previous_graph_node=\"Start___0af52ead8e224343a1606d95078bcd57\";null;"},{"name":"__silent_RecordOutputPrompt_9214db00a95e40ddbf6b859e0d977b63","applicable":"vaVars.previous_graph_node==\"Lookup Gigs___d66c0dac3421411ab67459aca36f8f22\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Gig List___9214db00a95e40ddbf6b859e0d977b63\";vaInputs.__silent_RecordOutputPrompt_9214db00a95e40ddbf6b859e0d977b63=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"acknowledge_msg":"vaVars.previous_graph_node=\"Gig List___9214db00a95e40ddbf6b859e0d977b63\";(function execute() {var recordOutputScriptedGR = (function execute(table) {var cardRecord = (function execute(table) {\n    var gr = new GlideRecord(table);\n    gr.get(vaInputs.lookup_gigs);\n    if(gr) {\n        return gr;\n    }\n})(table);\n;return cardRecord;})('x_snc_gig_tracker_gig');vaInputs.ReferenceVariable_026d79227dba230061573068ace4b69f = recordOutputScriptedGR;return (function execute() {var output = new global.VaRecordCardOutput({\"short_description\":\"Short description\",\"call_time\":\"Call Time\",\"location\":\"Location\"});\nreturn output.build(vaInputs.ReferenceVariable_026d79227dba230061573068ace4b69f,'x_snc_gig_tracker_gig');\n})();})();"},{"name":"__silent_Decision_733fe469878040b7aab14c001a897be5","applicable":"vaVars.previous_graph_node==\"Gig List___9214db00a95e40ddbf6b859e0d977b63\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Decision___733fe469878040b7aab14c001a897be5\";vaInputs.__silent_Decision_733fe469878040b7aab14c001a897be5=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"acknowledge_msg":"vaVars.previous_graph_node=\"Decision___733fe469878040b7aab14c001a897be5\";null;"},{"name":"__silent_Branch_65f83fe2128f44848ab6d471e23e52f5","applicable":"vaVars.previous_graph_node==\"Decision___733fe469878040b7aab14c001a897be5\" &amp;&amp; (function execute() {\n    return vaInputs.lookup_gigs != 'next';\n})()\n","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Done___65f83fe2128f44848ab6d471e23e52f5\";vaInputs.__silent_Branch_65f83fe2128f44848ab6d471e23e52f5=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"acknowledge_msg":"vaVars.previous_graph_node=\"Done___65f83fe2128f44848ab6d471e23e52f5\";null;"},{"name":"__silent_Branch_c050b4ae4254492bb491ddd78f2642be","applicable":"vaVars.previous_graph_node==\"Decision___733fe469878040b7aab14c001a897be5\" &amp;&amp; (function execute() {\n    return vaInputs.lookup_gigs == 'next';\n})()\n","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Next___c050b4ae4254492bb491ddd78f2642be\";vaInputs.__silent_Branch_c050b4ae4254492bb491ddd78f2642be=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"acknowledge_msg":"vaVars.previous_graph_node=\"Next___c050b4ae4254492bb491ddd78f2642be\";null;"},{"name":"__silent_CRUDAction_d66c0dac3421411ab67459aca36f8f22","applicable":"(vaVars.previous_graph_node==\"Start___0af52ead8e224343a1606d95078bcd57\" || vaVars.previous_graph_node==\"Next Page___b0f41050b5674185a92ce2df2c08be06\")","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Lookup Gigs___d66c0dac3421411ab67459aca36f8f22\";(function execute() {vaInputs.__silent_Decision_733fe469878040b7aab14c001a897be5.reset();vaInputs.__silent_Branch_65f83fe2128f44848ab6d471e23e52f5.reset();vaInputs.__silent_ScriptedAction_b0f41050b5674185a92ce2df2c08be06.reset();vaInputs.__silent_RecordOutputPrompt_9214db00a95e40ddbf6b859e0d977b63.reset();vaInputs.lookup_gigs = (function execute(table) {vaInputs.initialize(\"lookup_gigs\");\nreturn (function execute() {\n    var options = [];\n\n    // get variables\n    var index = parseInt(vaVars.index);\n    var limit = parseInt(vaVars.limit);\n    var count = 0;\n    \n    // query current and future planned outages \n    var gr = new GlideRecordSecure('x_snc_gig_tracker_gig');\n    gr.addEncodedQuery('call_time=javascript:gs.beginningOfToday()')\n    gr.orderByDesc('call_time'); \n    gr.chooseWindow(index, index + limit, true);\n    gr.query();  \n\n    // get total count, used for pagination\n    count = gr.getRowCount();\n    vaVars.count = count;\n\n    // page of outage records\n    var cnt = 0;\n    while(gr.next()) {\n        options.push({ 'value': gr.getUniqueValue(), \n            'label': gr.getDisplayValue('number') + ' [' + gr.getDisplayValue('short_description') + ']'});\n        cnt++;\n    }\n\n    var totalPages = Math.ceil(count / limit).toString();\n    var currentPage = Math.ceil((index+1) / limit).toString();\n\n    // previous and next buttons\n    if ( index &gt; 0 &amp;&amp; cnt &gt; 0 ) {\n        options.push({ 'value': 'prev', 'label': gs.getMessage('Show previous')});\n    }\n    if ( count &gt; index + limit) {\n        options.push({ 'value': 'next', 'label': gs.getMessage('Show more')});\n    }\n    return options;\n})();\n\n;})('x_snc_gig_tracker_gig');vaInputs.__silent_TerminateGoal_402c3ab99b7d4aee9e077702d5e3ee40.reset();vaInputs.__silent_Branch_c050b4ae4254492bb491ddd78f2642be.reset();})();vaInputs.__silent_CRUDAction_d66c0dac3421411ab67459aca36f8f22=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"acknowledge_msg":"vaVars.previous_graph_node=\"Lookup Gigs___d66c0dac3421411ab67459aca36f8f22\";null;"},{"name":"__silent_ScriptedAction_b0f41050b5674185a92ce2df2c08be06","applicable":"vaVars.previous_graph_node==\"Next___c050b4ae4254492bb491ddd78f2642be\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"Next Page___b0f41050b5674185a92ce2df2c08be06\";(function execute() {(function execute() {\n    \n        // query assets to get the updated count\n        var gr = new GlideRecordSecure('x_snc_gig_tracker_gig');\n        gr.addEncodedQuery('call_time=javascript:gs.beginningOfToday()')\n        gr.orderByDesc('call_time'); \n        gr.query();  \n    \n        // get total count, to check for existence of next page\n        vaVars.count = gr.getRowCount();\n    \n        // next page math\n        var count = parseInt(vaVars.count);\n        var index = parseInt(vaVars.index);\n        var limit = parseInt(vaVars.limit);\n        if ( index + limit &gt;= count )\n            vaVars.index = 0;\n        else\n            vaVars.index = index + limit;\n        return '';\n    })();\n;})();vaInputs.__silent_ScriptedAction_b0f41050b5674185a92ce2df2c08be06=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"acknowledge_msg":"vaVars.previous_graph_node=\"Next Page___b0f41050b5674185a92ce2df2c08be06\";vaInputs.__silent_CRUDAction_d66c0dac3421411ab67459aca36f8f22.reset();null;"},{"name":"__silent_TerminateGoal_402c3ab99b7d4aee9e077702d5e3ee40","applicable":"vaVars.previous_graph_node==\"Done___65f83fe2128f44848ab6d471e23e52f5\"","direction":"Input","required":true,"prompt_msg":"vaVars.previous_graph_node=\"End___402c3ab99b7d4aee9e077702d5e3ee40\";vaInputs.__silent_TerminateGoal_402c3ab99b7d4aee9e077702d5e3ee40=true;null;","confirm_msg_on_default_value":{"msg":"","val_for_confirm":true},"acknowledge_msg":"vaVars.previous_graph_node=\"End___402c3ab99b7d4aee9e077702d5e3ee40\";vaVars.__segment_trigger_b6393fa81c2d4642a68da420fd8a6c84_done=true;null;"}],"variables_update":[]}],"roles":[],"active":true,"published":false,"score":0.0,"sys_scope":"c55fd1504f12a300137c4b8d0210c7d0","title":"_PRVW__466d7922c1ba2300ff6879f20360d29e"}</definition>
        <fields/>
        <is_system_topic>false</is_system_topic>
        <key_phrases>Upcoming Gigs</key_phrases>
        <metaphone>JK APKM</metaphone>
        <name>_PRVW__466d7922c1ba2300ff6879f20360d29e</name>
        <published>false</published>
        <roles/>
        <sys_class_name>sys_cs_topic</sys_class_name>
        <sys_created_by>jesse.adams</sys_created_by>
        <sys_created_on>2019-01-07 15:01:32</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>c26d7922dbba2300f51ef3c61d96199f</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>_PRVW__466d7922c1ba2300ff6879f20360d29e</sys_name>
        <sys_package display_value="Gig Tracker" source="x_snc_gig_tracker">c55fd1504f12a300137c4b8d0210c7d0</sys_package>
        <sys_policy/>
        <sys_scope display_value="Gig Tracker">c55fd1504f12a300137c4b8d0210c7d0</sys_scope>
        <sys_update_name>sys_cs_topic_c26d7922dbba2300f51ef3c61d96199f</sys_update_name>
        <sys_updated_by>jesse.adams</sys_updated_by>
        <sys_updated_on>2019-01-07 15:01:32</sys_updated_on>
        <title>_PRVW__466d7922c1ba2300ff6879f20360d29e</title>
        <vendor display_value="ServiceNow">c2f0b8f187033200246ddd4c97cb0bb9</vendor>
    </sys_cs_topic>
    <sys_variable_value action="delete_multiple" query="document_key=c26d7922dbba2300f51ef3c61d96199f"/>
</record_update>
